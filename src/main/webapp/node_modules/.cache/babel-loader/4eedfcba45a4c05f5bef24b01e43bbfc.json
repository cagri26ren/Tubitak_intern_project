{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _LocationUtils = require('./LocationUtils');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _createTransitionManager = require('./createTransitionManager');\n\nvar _createTransitionManager2 = _interopRequireDefault(_createTransitionManager);\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar PopStateEvent = 'popstate';\nvar HashChangeEvent = 'hashchange';\n\nvar getHistoryState = function getHistoryState() {\n  try {\n    return window.history.state || {};\n  } catch (e) {\n    // IE 11 sometimes throws when accessing window.history.state\n    // See https://github.com/mjackson/history/pull/289\n    return {};\n  }\n};\n/**\n * Creates a history object that uses the HTML5 history API including\n * pushState, replaceState, and the popstate event.\n */\n\n\nvar createBrowserHistory = function createBrowserHistory() {\n  var props = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? (0, _invariant2.default)(false, 'Browser history needs a DOM') : (0, _invariant2.default)(false) : void 0;\n  var globalHistory = window.history;\n  var canUseHistory = (0, _DOMUtils.supportsHistory)();\n  var needsHashChangeListener = !(0, _DOMUtils.supportsPopStateOnHashChange)();\n  var _props$basename = props.basename;\n  var basename = _props$basename === undefined ? '' : _props$basename;\n  var _props$forceRefresh = props.forceRefresh;\n  var forceRefresh = _props$forceRefresh === undefined ? false : _props$forceRefresh;\n  var _props$getUserConfirm = props.getUserConfirmation;\n  var getUserConfirmation = _props$getUserConfirm === undefined ? _DOMUtils.getConfirmation : _props$getUserConfirm;\n  var _props$keyLength = props.keyLength;\n  var keyLength = _props$keyLength === undefined ? 6 : _props$keyLength;\n\n  var getDOMLocation = function getDOMLocation(historyState) {\n    var _ref = historyState || {};\n\n    var key = _ref.key;\n    var state = _ref.state;\n    var _window$location = window.location;\n    var pathname = _window$location.pathname;\n    var search = _window$location.search;\n    var hash = _window$location.hash;\n    var path = pathname + search + hash;\n    if (basename) path = (0, _PathUtils.stripPrefix)(path, basename);\n    return _extends({}, (0, _PathUtils.parsePath)(path), {\n      state: state,\n      key: key\n    });\n  };\n\n  var createKey = function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  };\n\n  var transitionManager = (0, _createTransitionManager2.default)();\n\n  var setState = function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  };\n\n  var handlePopState = function handlePopState(event) {\n    if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n    handlePop(getDOMLocation(event.state));\n  };\n\n  var handleHashChange = function handleHashChange() {\n    handlePop(getDOMLocation(getHistoryState()));\n  };\n\n  var forceNextPop = false;\n\n  var handlePop = function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      (function () {\n        var action = 'POP';\n        transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n          if (ok) {\n            setState({\n              action: action,\n              location: location\n            });\n          } else {\n            revertPop(location);\n          }\n        });\n      })();\n    }\n  };\n\n  var revertPop = function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of keys we've seen in sessionStorage.\n    // Instead, we just default to 0 for keys we don't know.\n\n    var toIndex = allKeys.indexOf(toLocation.key);\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allKeys.indexOf(fromLocation.key);\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  };\n\n  var initialLocation = getDOMLocation(getHistoryState());\n  var allKeys = [initialLocation.key]; // Public interface\n\n  var push = function push(path, state) {\n    var action = 'PUSH';\n    var location = (0, _LocationUtils.createLocation)(path, state, createKey());\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var url = basename + (0, _PathUtils.createPath)(location);\n      var key = location.key;\n      var state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.pushState({\n          key: key,\n          state: state\n        }, null, url);\n\n        if (forceRefresh) {\n          window.location.href = url;\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n          nextKeys.push(location.key);\n          allKeys = nextKeys;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history') : void 0;\n        window.location.href = url;\n      }\n    });\n  };\n\n  var replace = function replace(path, state) {\n    var action = 'REPLACE';\n    var location = (0, _LocationUtils.createLocation)(path, state, createKey());\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var url = basename + (0, _PathUtils.createPath)(location);\n      var key = location.key;\n      var state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.replaceState({\n          key: key,\n          state: state\n        }, null, url);\n\n        if (forceRefresh) {\n          window.location.replace(url);\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          if (prevIndex !== -1) allKeys[prevIndex] = location.key;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history') : void 0;\n        window.location.replace(url);\n      }\n    });\n  };\n\n  var go = function go(n) {\n    globalHistory.go(n);\n  };\n\n  var goBack = function goBack() {\n    return go(-1);\n  };\n\n  var goForward = function goForward() {\n    return go(1);\n  };\n\n  var listenerCount = 0;\n\n  var checkDOMListeners = function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1) {\n      (0, _DOMUtils.addEventListener)(window, PopStateEvent, handlePopState);\n      if (needsHashChangeListener) (0, _DOMUtils.addEventListener)(window, HashChangeEvent, handleHashChange);\n    } else if (listenerCount === 0) {\n      (0, _DOMUtils.removeEventListener)(window, PopStateEvent, handlePopState);\n      if (needsHashChangeListener) (0, _DOMUtils.removeEventListener)(window, HashChangeEvent, handleHashChange);\n    }\n  };\n\n  var isBlocked = false;\n\n  var block = function block() {\n    var prompt = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  };\n\n  var listen = function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      return unlisten();\n    };\n  };\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n};\n\nexports.default = createBrowserHistory;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Desktop/tubitak-project/event-manager-react/node_modules/history/createBrowserHistory.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_warning","require","_warning2","_interopRequireDefault","_invariant","_invariant2","_LocationUtils","_PathUtils","_createTransitionManager","_createTransitionManager2","_ExecutionEnvironment","_DOMUtils","obj","default","PopStateEvent","HashChangeEvent","getHistoryState","window","history","state","e","createBrowserHistory","props","undefined","canUseDOM","process","env","NODE_ENV","globalHistory","canUseHistory","supportsHistory","needsHashChangeListener","supportsPopStateOnHashChange","_props$basename","basename","_props$forceRefresh","forceRefresh","_props$getUserConfirm","getUserConfirmation","getConfirmation","_props$keyLength","keyLength","getDOMLocation","historyState","_ref","_window$location","location","pathname","search","hash","path","stripPrefix","parsePath","createKey","Math","random","toString","substr","transitionManager","setState","nextState","notifyListeners","action","handlePopState","event","handlePop","handleHashChange","forceNextPop","confirmTransitionTo","ok","revertPop","fromLocation","toLocation","toIndex","allKeys","indexOf","fromIndex","delta","go","initialLocation","push","createLocation","url","createPath","pushState","href","prevIndex","nextKeys","slice","replace","replaceState","n","goBack","goForward","listenerCount","checkDOMListeners","addEventListener","removeEventListener","isBlocked","block","prompt","unblock","setPrompt","listen","listener","unlisten","appendListener"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEA,IAAIS,QAAQ,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AAEA,IAAIC,SAAS,GAAGC,sBAAsB,CAACH,QAAD,CAAtC;;AAEA,IAAII,UAAU,GAAGH,OAAO,CAAC,WAAD,CAAxB;;AAEA,IAAII,WAAW,GAAGF,sBAAsB,CAACC,UAAD,CAAxC;;AAEA,IAAIE,cAAc,GAAGL,OAAO,CAAC,iBAAD,CAA5B;;AAEA,IAAIM,UAAU,GAAGN,OAAO,CAAC,aAAD,CAAxB;;AAEA,IAAIO,wBAAwB,GAAGP,OAAO,CAAC,2BAAD,CAAtC;;AAEA,IAAIQ,yBAAyB,GAAGN,sBAAsB,CAACK,wBAAD,CAAtD;;AAEA,IAAIE,qBAAqB,GAAGT,OAAO,CAAC,wBAAD,CAAnC;;AAEA,IAAIU,SAAS,GAAGV,OAAO,CAAC,YAAD,CAAvB;;AAEA,SAASE,sBAAT,CAAgCS,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACzB,UAAX,GAAwByB,GAAxB,GAA8B;AAAEC,IAAAA,OAAO,EAAED;AAAX,GAArC;AAAwD;;AAE/F,IAAIE,aAAa,GAAG,UAApB;AACA,IAAIC,eAAe,GAAG,YAAtB;;AAEA,IAAIC,eAAe,GAAG,SAASA,eAAT,GAA2B;AAC/C,MAAI;AACF,WAAOC,MAAM,CAACC,OAAP,CAAeC,KAAf,IAAwB,EAA/B;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV;AACA;AACA,WAAO,EAAP;AACD;AACF,CARD;AAUA;;;;;;AAIA,IAAIC,oBAAoB,GAAG,SAASA,oBAAT,GAAgC;AACzD,MAAIC,KAAK,GAAG7B,SAAS,CAACC,MAAV,IAAoB,CAApB,IAAyBD,SAAS,CAAC,CAAD,CAAT,KAAiB8B,SAA1C,GAAsD,EAAtD,GAA2D9B,SAAS,CAAC,CAAD,CAAhF;AAEA,GAACiB,qBAAqB,CAACc,SAAvB,GAAmCC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,CAAC,GAAGtB,WAAW,CAACQ,OAAhB,EAAyB,KAAzB,EAAgC,6BAAhC,CAAxC,GAAyG,CAAC,GAAGR,WAAW,CAACQ,OAAhB,EAAyB,KAAzB,CAA5I,GAA8K,KAAK,CAAnL;AAEA,MAAIe,aAAa,GAAGX,MAAM,CAACC,OAA3B;AACA,MAAIW,aAAa,GAAG,CAAC,GAAGlB,SAAS,CAACmB,eAAd,GAApB;AACA,MAAIC,uBAAuB,GAAG,CAAC,CAAC,GAAGpB,SAAS,CAACqB,4BAAd,GAA/B;AAEA,MAAIC,eAAe,GAAGX,KAAK,CAACY,QAA5B;AACA,MAAIA,QAAQ,GAAGD,eAAe,KAAKV,SAApB,GAAgC,EAAhC,GAAqCU,eAApD;AACA,MAAIE,mBAAmB,GAAGb,KAAK,CAACc,YAAhC;AACA,MAAIA,YAAY,GAAGD,mBAAmB,KAAKZ,SAAxB,GAAoC,KAApC,GAA4CY,mBAA/D;AACA,MAAIE,qBAAqB,GAAGf,KAAK,CAACgB,mBAAlC;AACA,MAAIA,mBAAmB,GAAGD,qBAAqB,KAAKd,SAA1B,GAAsCZ,SAAS,CAAC4B,eAAhD,GAAkEF,qBAA5F;AACA,MAAIG,gBAAgB,GAAGlB,KAAK,CAACmB,SAA7B;AACA,MAAIA,SAAS,GAAGD,gBAAgB,KAAKjB,SAArB,GAAiC,CAAjC,GAAqCiB,gBAArD;;AAGA,MAAIE,cAAc,GAAG,SAASA,cAAT,CAAwBC,YAAxB,EAAsC;AACzD,QAAIC,IAAI,GAAGD,YAAY,IAAI,EAA3B;;AAEA,QAAI/C,GAAG,GAAGgD,IAAI,CAAChD,GAAf;AACA,QAAIuB,KAAK,GAAGyB,IAAI,CAACzB,KAAjB;AACA,QAAI0B,gBAAgB,GAAG5B,MAAM,CAAC6B,QAA9B;AACA,QAAIC,QAAQ,GAAGF,gBAAgB,CAACE,QAAhC;AACA,QAAIC,MAAM,GAAGH,gBAAgB,CAACG,MAA9B;AACA,QAAIC,IAAI,GAAGJ,gBAAgB,CAACI,IAA5B;AAGA,QAAIC,IAAI,GAAGH,QAAQ,GAAGC,MAAX,GAAoBC,IAA/B;AAEA,QAAIf,QAAJ,EAAcgB,IAAI,GAAG,CAAC,GAAG3C,UAAU,CAAC4C,WAAf,EAA4BD,IAA5B,EAAkChB,QAAlC,CAAP;AAEd,WAAO9C,QAAQ,CAAC,EAAD,EAAK,CAAC,GAAGmB,UAAU,CAAC6C,SAAf,EAA0BF,IAA1B,CAAL,EAAsC;AACnD/B,MAAAA,KAAK,EAAEA,KAD4C;AAEnDvB,MAAAA,GAAG,EAAEA;AAF8C,KAAtC,CAAf;AAID,GAnBD;;AAqBA,MAAIyD,SAAS,GAAG,SAASA,SAAT,GAAqB;AACnC,WAAOC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqChB,SAArC,CAAP;AACD,GAFD;;AAIA,MAAIiB,iBAAiB,GAAG,CAAC,GAAGjD,yBAAyB,CAACI,OAA9B,GAAxB;;AAEA,MAAI8C,QAAQ,GAAG,SAASA,QAAT,CAAkBC,SAAlB,EAA6B;AAC1CxE,IAAAA,QAAQ,CAAC8B,OAAD,EAAU0C,SAAV,CAAR;;AAEA1C,IAAAA,OAAO,CAACxB,MAAR,GAAiBkC,aAAa,CAAClC,MAA/B;AAEAgE,IAAAA,iBAAiB,CAACG,eAAlB,CAAkC3C,OAAO,CAAC4B,QAA1C,EAAoD5B,OAAO,CAAC4C,MAA5D;AACD,GAND;;AAQA,MAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBC,KAAxB,EAA+B;AAClD,QAAIA,KAAK,CAAC7C,KAAN,KAAgBI,SAApB,EAA+B,OADmB,CACX;;AAEvC0C,IAAAA,SAAS,CAACvB,cAAc,CAACsB,KAAK,CAAC7C,KAAP,CAAf,CAAT;AACD,GAJD;;AAMA,MAAI+C,gBAAgB,GAAG,SAASA,gBAAT,GAA4B;AACjDD,IAAAA,SAAS,CAACvB,cAAc,CAAC1B,eAAe,EAAhB,CAAf,CAAT;AACD,GAFD;;AAIA,MAAImD,YAAY,GAAG,KAAnB;;AAEA,MAAIF,SAAS,GAAG,SAASA,SAAT,CAAmBnB,QAAnB,EAA6B;AAC3C,QAAIqB,YAAJ,EAAkB;AAChBA,MAAAA,YAAY,GAAG,KAAf;AACAR,MAAAA,QAAQ;AACT,KAHD,MAGO;AACL,OAAC,YAAY;AACX,YAAIG,MAAM,GAAG,KAAb;AAEAJ,QAAAA,iBAAiB,CAACU,mBAAlB,CAAsCtB,QAAtC,EAAgDgB,MAAhD,EAAwDxB,mBAAxD,EAA6E,UAAU+B,EAAV,EAAc;AACzF,cAAIA,EAAJ,EAAQ;AACNV,YAAAA,QAAQ,CAAC;AAAEG,cAAAA,MAAM,EAAEA,MAAV;AAAkBhB,cAAAA,QAAQ,EAAEA;AAA5B,aAAD,CAAR;AACD,WAFD,MAEO;AACLwB,YAAAA,SAAS,CAACxB,QAAD,CAAT;AACD;AACF,SAND;AAOD,OAVD;AAWD;AACF,GAjBD;;AAmBA,MAAIwB,SAAS,GAAG,SAASA,SAAT,CAAmBC,YAAnB,EAAiC;AAC/C,QAAIC,UAAU,GAAGtD,OAAO,CAAC4B,QAAzB,CAD+C,CAG/C;AACA;AACA;;AAEA,QAAI2B,OAAO,GAAGC,OAAO,CAACC,OAAR,CAAgBH,UAAU,CAAC5E,GAA3B,CAAd;AAEA,QAAI6E,OAAO,KAAK,CAAC,CAAjB,EAAoBA,OAAO,GAAG,CAAV;AAEpB,QAAIG,SAAS,GAAGF,OAAO,CAACC,OAAR,CAAgBJ,YAAY,CAAC3E,GAA7B,CAAhB;AAEA,QAAIgF,SAAS,KAAK,CAAC,CAAnB,EAAsBA,SAAS,GAAG,CAAZ;AAEtB,QAAIC,KAAK,GAAGJ,OAAO,GAAGG,SAAtB;;AAEA,QAAIC,KAAJ,EAAW;AACTV,MAAAA,YAAY,GAAG,IAAf;AACAW,MAAAA,EAAE,CAACD,KAAD,CAAF;AACD;AACF,GArBD;;AAuBA,MAAIE,eAAe,GAAGrC,cAAc,CAAC1B,eAAe,EAAhB,CAApC;AACA,MAAI0D,OAAO,GAAG,CAACK,eAAe,CAACnF,GAAjB,CAAd,CA7GyD,CA+GzD;;AAEA,MAAIoF,IAAI,GAAG,SAASA,IAAT,CAAc9B,IAAd,EAAoB/B,KAApB,EAA2B;AACpC,QAAI2C,MAAM,GAAG,MAAb;AACA,QAAIhB,QAAQ,GAAG,CAAC,GAAGxC,cAAc,CAAC2E,cAAnB,EAAmC/B,IAAnC,EAAyC/B,KAAzC,EAAgDkC,SAAS,EAAzD,CAAf;AAEAK,IAAAA,iBAAiB,CAACU,mBAAlB,CAAsCtB,QAAtC,EAAgDgB,MAAhD,EAAwDxB,mBAAxD,EAA6E,UAAU+B,EAAV,EAAc;AACzF,UAAI,CAACA,EAAL,EAAS;AAET,UAAIa,GAAG,GAAGhD,QAAQ,GAAG,CAAC,GAAG3B,UAAU,CAAC4E,UAAf,EAA2BrC,QAA3B,CAArB;AACA,UAAIlD,GAAG,GAAGkD,QAAQ,CAAClD,GAAnB;AACA,UAAIuB,KAAK,GAAG2B,QAAQ,CAAC3B,KAArB;;AAGA,UAAIU,aAAJ,EAAmB;AACjBD,QAAAA,aAAa,CAACwD,SAAd,CAAwB;AAAExF,UAAAA,GAAG,EAAEA,GAAP;AAAYuB,UAAAA,KAAK,EAAEA;AAAnB,SAAxB,EAAoD,IAApD,EAA0D+D,GAA1D;;AAEA,YAAI9C,YAAJ,EAAkB;AAChBnB,UAAAA,MAAM,CAAC6B,QAAP,CAAgBuC,IAAhB,GAAuBH,GAAvB;AACD,SAFD,MAEO;AACL,cAAII,SAAS,GAAGZ,OAAO,CAACC,OAAR,CAAgBzD,OAAO,CAAC4B,QAAR,CAAiBlD,GAAjC,CAAhB;AACA,cAAI2F,QAAQ,GAAGb,OAAO,CAACc,KAAR,CAAc,CAAd,EAAiBF,SAAS,KAAK,CAAC,CAAf,GAAmB,CAAnB,GAAuBA,SAAS,GAAG,CAApD,CAAf;AAEAC,UAAAA,QAAQ,CAACP,IAAT,CAAclC,QAAQ,CAAClD,GAAvB;AACA8E,UAAAA,OAAO,GAAGa,QAAV;AAEA5B,UAAAA,QAAQ,CAAC;AAAEG,YAAAA,MAAM,EAAEA,MAAV;AAAkBhB,YAAAA,QAAQ,EAAEA;AAA5B,WAAD,CAAR;AACD;AACF,OAdD,MAcO;AACLrB,QAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,CAAC,GAAGzB,SAAS,CAACW,OAAd,EAAuBM,KAAK,KAAKI,SAAjC,EAA4C,iFAA5C,CAAxC,GAAyK,KAAK,CAA9K;AAEAN,QAAAA,MAAM,CAAC6B,QAAP,CAAgBuC,IAAhB,GAAuBH,GAAvB;AACD;AACF,KA3BD;AA4BD,GAhCD;;AAkCA,MAAIO,OAAO,GAAG,SAASA,OAAT,CAAiBvC,IAAjB,EAAuB/B,KAAvB,EAA8B;AAC1C,QAAI2C,MAAM,GAAG,SAAb;AACA,QAAIhB,QAAQ,GAAG,CAAC,GAAGxC,cAAc,CAAC2E,cAAnB,EAAmC/B,IAAnC,EAAyC/B,KAAzC,EAAgDkC,SAAS,EAAzD,CAAf;AAEAK,IAAAA,iBAAiB,CAACU,mBAAlB,CAAsCtB,QAAtC,EAAgDgB,MAAhD,EAAwDxB,mBAAxD,EAA6E,UAAU+B,EAAV,EAAc;AACzF,UAAI,CAACA,EAAL,EAAS;AAET,UAAIa,GAAG,GAAGhD,QAAQ,GAAG,CAAC,GAAG3B,UAAU,CAAC4E,UAAf,EAA2BrC,QAA3B,CAArB;AACA,UAAIlD,GAAG,GAAGkD,QAAQ,CAAClD,GAAnB;AACA,UAAIuB,KAAK,GAAG2B,QAAQ,CAAC3B,KAArB;;AAGA,UAAIU,aAAJ,EAAmB;AACjBD,QAAAA,aAAa,CAAC8D,YAAd,CAA2B;AAAE9F,UAAAA,GAAG,EAAEA,GAAP;AAAYuB,UAAAA,KAAK,EAAEA;AAAnB,SAA3B,EAAuD,IAAvD,EAA6D+D,GAA7D;;AAEA,YAAI9C,YAAJ,EAAkB;AAChBnB,UAAAA,MAAM,CAAC6B,QAAP,CAAgB2C,OAAhB,CAAwBP,GAAxB;AACD,SAFD,MAEO;AACL,cAAII,SAAS,GAAGZ,OAAO,CAACC,OAAR,CAAgBzD,OAAO,CAAC4B,QAAR,CAAiBlD,GAAjC,CAAhB;AAEA,cAAI0F,SAAS,KAAK,CAAC,CAAnB,EAAsBZ,OAAO,CAACY,SAAD,CAAP,GAAqBxC,QAAQ,CAAClD,GAA9B;AAEtB+D,UAAAA,QAAQ,CAAC;AAAEG,YAAAA,MAAM,EAAEA,MAAV;AAAkBhB,YAAAA,QAAQ,EAAEA;AAA5B,WAAD,CAAR;AACD;AACF,OAZD,MAYO;AACLrB,QAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,CAAC,GAAGzB,SAAS,CAACW,OAAd,EAAuBM,KAAK,KAAKI,SAAjC,EAA4C,oFAA5C,CAAxC,GAA4K,KAAK,CAAjL;AAEAN,QAAAA,MAAM,CAAC6B,QAAP,CAAgB2C,OAAhB,CAAwBP,GAAxB;AACD;AACF,KAzBD;AA0BD,GA9BD;;AAgCA,MAAIJ,EAAE,GAAG,SAASA,EAAT,CAAYa,CAAZ,EAAe;AACtB/D,IAAAA,aAAa,CAACkD,EAAd,CAAiBa,CAAjB;AACD,GAFD;;AAIA,MAAIC,MAAM,GAAG,SAASA,MAAT,GAAkB;AAC7B,WAAOd,EAAE,CAAC,CAAC,CAAF,CAAT;AACD,GAFD;;AAIA,MAAIe,SAAS,GAAG,SAASA,SAAT,GAAqB;AACnC,WAAOf,EAAE,CAAC,CAAD,CAAT;AACD,GAFD;;AAIA,MAAIgB,aAAa,GAAG,CAApB;;AAEA,MAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BlB,KAA3B,EAAkC;AACxDiB,IAAAA,aAAa,IAAIjB,KAAjB;;AAEA,QAAIiB,aAAa,KAAK,CAAtB,EAAyB;AACvB,OAAC,GAAGnF,SAAS,CAACqF,gBAAd,EAAgC/E,MAAhC,EAAwCH,aAAxC,EAAuDiD,cAAvD;AAEA,UAAIhC,uBAAJ,EAA6B,CAAC,GAAGpB,SAAS,CAACqF,gBAAd,EAAgC/E,MAAhC,EAAwCF,eAAxC,EAAyDmD,gBAAzD;AAC9B,KAJD,MAIO,IAAI4B,aAAa,KAAK,CAAtB,EAAyB;AAC9B,OAAC,GAAGnF,SAAS,CAACsF,mBAAd,EAAmChF,MAAnC,EAA2CH,aAA3C,EAA0DiD,cAA1D;AAEA,UAAIhC,uBAAJ,EAA6B,CAAC,GAAGpB,SAAS,CAACsF,mBAAd,EAAmChF,MAAnC,EAA2CF,eAA3C,EAA4DmD,gBAA5D;AAC9B;AACF,GAZD;;AAcA,MAAIgC,SAAS,GAAG,KAAhB;;AAEA,MAAIC,KAAK,GAAG,SAASA,KAAT,GAAiB;AAC3B,QAAIC,MAAM,GAAG3G,SAAS,CAACC,MAAV,IAAoB,CAApB,IAAyBD,SAAS,CAAC,CAAD,CAAT,KAAiB8B,SAA1C,GAAsD,KAAtD,GAA8D9B,SAAS,CAAC,CAAD,CAApF;AAEA,QAAI4G,OAAO,GAAG3C,iBAAiB,CAAC4C,SAAlB,CAA4BF,MAA5B,CAAd;;AAEA,QAAI,CAACF,SAAL,EAAgB;AACdH,MAAAA,iBAAiB,CAAC,CAAD,CAAjB;AACAG,MAAAA,SAAS,GAAG,IAAZ;AACD;;AAED,WAAO,YAAY;AACjB,UAAIA,SAAJ,EAAe;AACbA,QAAAA,SAAS,GAAG,KAAZ;AACAH,QAAAA,iBAAiB,CAAC,CAAC,CAAF,CAAjB;AACD;;AAED,aAAOM,OAAO,EAAd;AACD,KAPD;AAQD,GAlBD;;AAoBA,MAAIE,MAAM,GAAG,SAASA,MAAT,CAAgBC,QAAhB,EAA0B;AACrC,QAAIC,QAAQ,GAAG/C,iBAAiB,CAACgD,cAAlB,CAAiCF,QAAjC,CAAf;AACAT,IAAAA,iBAAiB,CAAC,CAAD,CAAjB;AAEA,WAAO,YAAY;AACjBA,MAAAA,iBAAiB,CAAC,CAAC,CAAF,CAAjB;AACA,aAAOU,QAAQ,EAAf;AACD,KAHD;AAID,GARD;;AAUA,MAAIvF,OAAO,GAAG;AACZxB,IAAAA,MAAM,EAAEkC,aAAa,CAAClC,MADV;AAEZoE,IAAAA,MAAM,EAAE,KAFI;AAGZhB,IAAAA,QAAQ,EAAEiC,eAHE;AAIZC,IAAAA,IAAI,EAAEA,IAJM;AAKZS,IAAAA,OAAO,EAAEA,OALG;AAMZX,IAAAA,EAAE,EAAEA,EANQ;AAOZc,IAAAA,MAAM,EAAEA,MAPI;AAQZC,IAAAA,SAAS,EAAEA,SARC;AASZM,IAAAA,KAAK,EAAEA,KATK;AAUZI,IAAAA,MAAM,EAAEA;AAVI,GAAd;AAaA,SAAOrF,OAAP;AACD,CA7PD;;AA+PAhC,OAAO,CAAC2B,OAAR,GAAkBQ,oBAAlB","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _LocationUtils = require('./LocationUtils');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _createTransitionManager = require('./createTransitionManager');\n\nvar _createTransitionManager2 = _interopRequireDefault(_createTransitionManager);\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PopStateEvent = 'popstate';\nvar HashChangeEvent = 'hashchange';\n\nvar getHistoryState = function getHistoryState() {\n  try {\n    return window.history.state || {};\n  } catch (e) {\n    // IE 11 sometimes throws when accessing window.history.state\n    // See https://github.com/mjackson/history/pull/289\n    return {};\n  }\n};\n\n/**\n * Creates a history object that uses the HTML5 history API including\n * pushState, replaceState, and the popstate event.\n */\nvar createBrowserHistory = function createBrowserHistory() {\n  var props = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? (0, _invariant2.default)(false, 'Browser history needs a DOM') : (0, _invariant2.default)(false) : void 0;\n\n  var globalHistory = window.history;\n  var canUseHistory = (0, _DOMUtils.supportsHistory)();\n  var needsHashChangeListener = !(0, _DOMUtils.supportsPopStateOnHashChange)();\n\n  var _props$basename = props.basename;\n  var basename = _props$basename === undefined ? '' : _props$basename;\n  var _props$forceRefresh = props.forceRefresh;\n  var forceRefresh = _props$forceRefresh === undefined ? false : _props$forceRefresh;\n  var _props$getUserConfirm = props.getUserConfirmation;\n  var getUserConfirmation = _props$getUserConfirm === undefined ? _DOMUtils.getConfirmation : _props$getUserConfirm;\n  var _props$keyLength = props.keyLength;\n  var keyLength = _props$keyLength === undefined ? 6 : _props$keyLength;\n\n\n  var getDOMLocation = function getDOMLocation(historyState) {\n    var _ref = historyState || {};\n\n    var key = _ref.key;\n    var state = _ref.state;\n    var _window$location = window.location;\n    var pathname = _window$location.pathname;\n    var search = _window$location.search;\n    var hash = _window$location.hash;\n\n\n    var path = pathname + search + hash;\n\n    if (basename) path = (0, _PathUtils.stripPrefix)(path, basename);\n\n    return _extends({}, (0, _PathUtils.parsePath)(path), {\n      state: state,\n      key: key\n    });\n  };\n\n  var createKey = function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  };\n\n  var transitionManager = (0, _createTransitionManager2.default)();\n\n  var setState = function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n\n    transitionManager.notifyListeners(history.location, history.action);\n  };\n\n  var handlePopState = function handlePopState(event) {\n    if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n    handlePop(getDOMLocation(event.state));\n  };\n\n  var handleHashChange = function handleHashChange() {\n    handlePop(getDOMLocation(getHistoryState()));\n  };\n\n  var forceNextPop = false;\n\n  var handlePop = function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      (function () {\n        var action = 'POP';\n\n        transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n          if (ok) {\n            setState({ action: action, location: location });\n          } else {\n            revertPop(location);\n          }\n        });\n      })();\n    }\n  };\n\n  var revertPop = function revertPop(fromLocation) {\n    var toLocation = history.location;\n\n    // TODO: We could probably make this more reliable by\n    // keeping a list of keys we've seen in sessionStorage.\n    // Instead, we just default to 0 for keys we don't know.\n\n    var toIndex = allKeys.indexOf(toLocation.key);\n\n    if (toIndex === -1) toIndex = 0;\n\n    var fromIndex = allKeys.indexOf(fromLocation.key);\n\n    if (fromIndex === -1) fromIndex = 0;\n\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  };\n\n  var initialLocation = getDOMLocation(getHistoryState());\n  var allKeys = [initialLocation.key];\n\n  // Public interface\n\n  var push = function push(path, state) {\n    var action = 'PUSH';\n    var location = (0, _LocationUtils.createLocation)(path, state, createKey());\n\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n\n      var url = basename + (0, _PathUtils.createPath)(location);\n      var key = location.key;\n      var state = location.state;\n\n\n      if (canUseHistory) {\n        globalHistory.pushState({ key: key, state: state }, null, url);\n\n        if (forceRefresh) {\n          window.location.href = url;\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n\n          nextKeys.push(location.key);\n          allKeys = nextKeys;\n\n          setState({ action: action, location: location });\n        }\n      } else {\n        process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history') : void 0;\n\n        window.location.href = url;\n      }\n    });\n  };\n\n  var replace = function replace(path, state) {\n    var action = 'REPLACE';\n    var location = (0, _LocationUtils.createLocation)(path, state, createKey());\n\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n\n      var url = basename + (0, _PathUtils.createPath)(location);\n      var key = location.key;\n      var state = location.state;\n\n\n      if (canUseHistory) {\n        globalHistory.replaceState({ key: key, state: state }, null, url);\n\n        if (forceRefresh) {\n          window.location.replace(url);\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n\n          if (prevIndex !== -1) allKeys[prevIndex] = location.key;\n\n          setState({ action: action, location: location });\n        }\n      } else {\n        process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history') : void 0;\n\n        window.location.replace(url);\n      }\n    });\n  };\n\n  var go = function go(n) {\n    globalHistory.go(n);\n  };\n\n  var goBack = function goBack() {\n    return go(-1);\n  };\n\n  var goForward = function goForward() {\n    return go(1);\n  };\n\n  var listenerCount = 0;\n\n  var checkDOMListeners = function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1) {\n      (0, _DOMUtils.addEventListener)(window, PopStateEvent, handlePopState);\n\n      if (needsHashChangeListener) (0, _DOMUtils.addEventListener)(window, HashChangeEvent, handleHashChange);\n    } else if (listenerCount === 0) {\n      (0, _DOMUtils.removeEventListener)(window, PopStateEvent, handlePopState);\n\n      if (needsHashChangeListener) (0, _DOMUtils.removeEventListener)(window, HashChangeEvent, handleHashChange);\n    }\n  };\n\n  var isBlocked = false;\n\n  var block = function block() {\n    var prompt = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  };\n\n  var listen = function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n\n    return function () {\n      checkDOMListeners(-1);\n      return unlisten();\n    };\n  };\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n\n  return history;\n};\n\nexports.default = createBrowserHistory;"]},"metadata":{},"sourceType":"script"}