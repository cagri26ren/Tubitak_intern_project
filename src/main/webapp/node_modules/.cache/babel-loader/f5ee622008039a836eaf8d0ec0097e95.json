{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cagri Eren\\\\Desktop\\\\tubitak-project\\\\event-manager-react\\\\src\\\\components\\\\Survey\\\\SurveyElement.js\";\nimport 'date-fns';\nimport React, { Component, Fragment } from \"react\";\nimport TextField from '@material-ui/core/TextField';\nimport history from '../../history';\nimport DateSection from '../DateSection';\nimport Button from '@material-ui/core/Button';\nimport Pagination from '@material-ui/lab/Pagination';\nimport MapContainer from '../../MapContainer';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport axios from 'axios';\nimport SurveyHeader from './SurveyHeader';\nimport SurveyComponent from './SurveyComponent';\nimport SurveyElementComponent from './SurveyElementComponent';\nimport { isThisSecond } from 'date-fns';\nconst uri = \"http://localhost:8080/surveyQuestions/\";\n\nfunction getParticipant(arr) {\n  console.log(arr);\n\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i].tcKimlikNo === localStorage.getItem('tc')) {\n      return arr[i];\n    }\n  }\n}\n\nlet number = 0;\n\nclass SurveyElement extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      event: {},\n      answers: [],\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    axios.post(uri + window.location.href.substring(window.location.href.indexOf(\"/surveyQuestions\") + 16), {\n      'tcKimlikNo': localStorage.getItem('tc')\n    }).then(response => {\n      this.setState({\n        event: response.data,\n        loaded: true\n      });\n      console.log(response);\n    });\n  }\n\n  getPostData(event) {\n    let postData = [];\n\n    for (let i = 0; i < getParticipant(event.participants).surveyQuestions.length; i++) {\n      const data = {\n        'questionName': getParticipant(event.participants).surveyQuestions[i].questionName,\n        'answer': this.state.answer[i],\n        'tcKimlikNo': localStorage.getItem('tc')\n      };\n      postData.push(data);\n    }\n\n    return postData;\n  }\n\n  handleTextArea(text, i) {\n    console.log(i);\n    console.log(text);\n    let arr = [...this.state.answers];\n    arr[i] = text;\n    this.setState({\n      answers: arr\n    });\n  }\n\n  createEventComponents(event) {\n    number = number + 1;\n    console.log(event);\n    return /*#__PURE__*/React.createElement(SurveyElementComponent, {\n      question: event.questionName,\n      text: this.state.answers[number - 1],\n      number: number,\n      handleChange: (text, i) => {\n        this.handleTextArea(text, i);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    });\n  }\n\n  handleSubmit(event) {\n    axios.put(uri + window.location.href.substring(window.location.href.indexOf(\"/surveyQuestions\")) + 16, this.getPostData(this.state.event)).then(response => {\n      if (response.data.message === 'ERROR') {\n        console.log(response);\n      } else {\n        history.push(\"/events\");\n      }\n    });\n  }\n\n  render() {\n    console.log(\"asdas\");\n    number = 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      width: \"100%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '40%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 50\n      }\n    }, this.state.event.name, \" Survey \"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: 'black',\n        height: '1px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '80%',\n        border: '3px solid black',\n        borderRadius: '25px',\n        margin: '10px auto',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-evenly'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, this.state.loaded ? getParticipant(this.state.event.participants).surveyQuestions.map(surveyQuestion => this.createEventComponents(surveyQuestion)) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 176\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '80%',\n        padding: '30px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: event => {\n        this.handleSubmit(event);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }\n    }, \"Submit\"))));\n  }\n\n}\n\nexport default SurveyElement;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Desktop/tubitak-project/event-manager-react/src/components/Survey/SurveyElement.js"],"names":["React","Component","Fragment","TextField","history","DateSection","Button","Pagination","MapContainer","TextareaAutosize","axios","SurveyHeader","SurveyComponent","SurveyElementComponent","isThisSecond","uri","getParticipant","arr","console","log","i","length","tcKimlikNo","localStorage","getItem","number","SurveyElement","constructor","props","state","event","answers","loaded","componentDidMount","post","window","location","href","substring","indexOf","then","response","setState","data","getPostData","postData","participants","surveyQuestions","questionName","answer","push","handleTextArea","text","createEventComponents","handleSubmit","put","message","render","marginLeft","name","backgroundColor","height","width","border","borderRadius","margin","display","flexDirection","justifyContent","map","surveyQuestion","padding"],"mappings":";AAAA,OAAO,UAAP;AACA,OAAOA,KAAP,IAAeC,SAAf,EAAyBC,QAAzB,QAAwC,OAAxC;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,sBAAP,MAAmC,0BAAnC;AACA,SAASC,YAAT,QAA6B,UAA7B;AAEA,MAAMC,GAAG,GAAG,wCAAZ;;AAEA,SAASC,cAAT,CAAwBC,GAAxB,EAA4B;AACxBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,OAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACjC,QAAIH,GAAG,CAACG,CAAD,CAAH,CAAOE,UAAP,KAAsBC,YAAY,CAACC,OAAb,CAAqB,IAArB,CAA1B,EAAqD;AACjD,aAAOP,GAAG,CAACG,CAAD,CAAV;AACH;AACJ;AACJ;;AAGD,IAAIK,MAAM,GAAG,CAAb;;AAKA,MAAMC,aAAN,SAA4BzB,SAA5B,CAAqC;AACjC0B,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAC,EADG;AAETC,MAAAA,OAAO,EAAC,EAFC;AAGTC,MAAAA,MAAM,EAAC;AAHE,KAAb;AAKH;;AACDC,EAAAA,iBAAiB,GAAE;AACfvB,IAAAA,KAAK,CAACwB,IAAN,CAAWnB,GAAG,GAACoB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,SAArB,CAA+BH,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBE,OAArB,CAA6B,kBAA7B,IAAmD,EAAlF,CAAf,EAAsG;AAAC,oBAAahB,YAAY,CAACC,OAAb,CAAqB,IAArB;AAAd,KAAtG,EAAiJgB,IAAjJ,CAAsJC,QAAQ,IAAI;AAC9J,WAAKC,QAAL,CAAc;AAACZ,QAAAA,KAAK,EAACW,QAAQ,CAACE,IAAhB;AAAqBX,QAAAA,MAAM,EAAC;AAA5B,OAAd;AACAd,MAAAA,OAAO,CAACC,GAAR,CAAYsB,QAAZ;AACH,KAHD;AAIH;;AACDG,EAAAA,WAAW,CAAEd,KAAF,EAAS;AAChB,QAAIe,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIzB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,cAAc,CAACc,KAAK,CAACgB,YAAP,CAAd,CAAmCC,eAAnC,CAAmD1B,MAAvE,EAA+ED,CAAC,EAAhF,EAAoF;AAChF,YAAMuB,IAAI,GAAE;AACR,wBAAgB3B,cAAc,CAACc,KAAK,CAACgB,YAAP,CAAd,CAAmCC,eAAnC,CAAmD3B,CAAnD,EAAsD4B,YAD9D;AAER,kBAAU,KAAKnB,KAAL,CAAWoB,MAAX,CAAkB7B,CAAlB,CAFF;AAGR,sBAAaG,YAAY,CAACC,OAAb,CAAqB,IAArB;AAHL,OAAZ;AAKAqB,MAAAA,QAAQ,CAACK,IAAT,CAAcP,IAAd;AACH;;AACD,WAAOE,QAAP;AACH;;AACDM,EAAAA,cAAc,CAACC,IAAD,EAAMhC,CAAN,EAAQ;AAClBF,IAAAA,OAAO,CAACC,GAAR,CAAYC,CAAZ;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYiC,IAAZ;AACA,QAAInC,GAAG,GAAG,CAAC,GAAG,KAAKY,KAAL,CAAWE,OAAf,CAAV;AACAd,IAAAA,GAAG,CAACG,CAAD,CAAH,GAASgC,IAAT;AAEA,SAAKV,QAAL,CAAc;AAACX,MAAAA,OAAO,EAACd;AAAT,KAAd;AACH;;AAEDoC,EAAAA,qBAAqB,CAACvB,KAAD,EAAO;AACxBL,IAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACA,wBACI,oBAAC,sBAAD;AACI,MAAA,QAAQ,EAAEA,KAAK,CAACkB,YADpB;AAEI,MAAA,IAAI,EAAE,KAAKnB,KAAL,CAAWE,OAAX,CAAmBN,MAAM,GAAC,CAA1B,CAFV;AAGI,MAAA,MAAM,EAAEA,MAHZ;AAII,MAAA,YAAY,EAAE,CAAC2B,IAAD,EAAMhC,CAAN,KAAU;AAAC,aAAK+B,cAAL,CAAoBC,IAApB,EAAyBhC,CAAzB;AAA4B,OAJzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AASH;;AAEDkC,EAAAA,YAAY,CAACxB,KAAD,EAAO;AACfpB,IAAAA,KAAK,CAAC6C,GAAN,CAAUxC,GAAG,GAACoB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,SAArB,CAA+BH,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBE,OAArB,CAA6B,kBAA7B,CAA/B,CAAJ,GAAuF,EAAjG,EAAqG,KAAKK,WAAL,CAAiB,KAAKf,KAAL,CAAWC,KAA5B,CAArG,EAA0IU,IAA1I,CAA+IC,QAAQ,IAAE;AACrJ,UAAGA,QAAQ,CAACE,IAAT,CAAca,OAAd,KAAwB,OAA3B,EAAmC;AAC/BtC,QAAAA,OAAO,CAACC,GAAR,CAAYsB,QAAZ;AACH,OAFD,MAGI;AACArC,QAAAA,OAAO,CAAC8C,IAAR,CAAa,SAAb;AACH;AACJ,KAPD;AAQH;;AAGDO,EAAAA,MAAM,GAAE;AACJvC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAM,IAAAA,MAAM,GAAG,CAAT;AACA,wBACI;AAAK,MAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAE;AAACiC,QAAAA,UAAU,EAAC;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAK7B,KAAL,CAAWC,KAAX,CAAiB6B,IAAtB,aAAjC,MADJ,eAEI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,eAAe,EAAE,OAAlB;AAA0BC,QAAAA,MAAM,EAAC;AAAjC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,eAGI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,KAAK,EAAC,KAAP;AAAaC,QAAAA,MAAM,EAAC,iBAApB;AAAsCC,QAAAA,YAAY,EAAC,MAAnD;AAA0DC,QAAAA,MAAM,EAAC,WAAjE;AAA6EL,QAAAA,eAAe,EAAC;AAA7F,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAE;AAACM,QAAAA,OAAO,EAAC,MAAT;AAAgBC,QAAAA,aAAa,EAAC,QAA9B;AAAuCC,QAAAA,cAAc,EAAC;AAAtD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,KAAKvC,KAAL,CAAWG,MAAZ,GAAoBhB,cAAc,CAAC,KAAKa,KAAL,CAAWC,KAAX,CAAiBgB,YAAlB,CAAd,CAA8CC,eAA9C,CAA8DsB,GAA9D,CAAmEC,cAAc,IAAI,KAAKjB,qBAAL,CAA2BiB,cAA3B,CAArF,CAApB,gBAAsJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD3J,CADJ,eAII;AAAK,MAAA,KAAK,EAAE;AAACZ,QAAAA,UAAU,EAAC,KAAZ;AAAkBa,QAAAA,OAAO,EAAC;AAA1B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,KAAK,EAAC,SAAlC;AAA4C,MAAA,OAAO,EAAGzC,KAAD,IAAW;AAAC,aAAKwB,YAAL,CAAkBxB,KAAlB;AAAyB,OAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADR,CAJJ,CAHJ,CADJ;AAiBH;;AAlFgC;;AAsFrC,eAAeJ,aAAf","sourcesContent":["import 'date-fns';\r\nimport React, {Component,Fragment} from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport history from '../../history';\r\nimport DateSection from '../DateSection';\r\nimport Button from '@material-ui/core/Button';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport MapContainer from '../../MapContainer';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport axios from 'axios';\r\nimport SurveyHeader from './SurveyHeader'\r\nimport SurveyComponent from './SurveyComponent'\r\nimport SurveyElementComponent from './SurveyElementComponent'\r\nimport { isThisSecond } from 'date-fns';\r\n\r\nconst uri = \"http://localhost:8080/surveyQuestions/\";\r\n\r\nfunction getParticipant(arr){\r\n    console.log(arr);\r\n    for( let i = 0; i < arr.length; i++ ){\r\n        if( arr[i].tcKimlikNo === localStorage.getItem('tc')){\r\n            return arr[i];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nlet number = 0;\r\n\r\n\r\n\r\n\r\nclass SurveyElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            event:{},\r\n            answers:[],\r\n            loaded:false\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        axios.post(uri+window.location.href.substring(window.location.href.indexOf(\"/surveyQuestions\") + 16 ),{'tcKimlikNo':localStorage.getItem('tc')}).then(response => {\r\n            this.setState({event:response.data,loaded:true})\r\n            console.log(response)\r\n        });\r\n    }\r\n    getPostData( event ){\r\n        let postData = [];\r\n        for( let i = 0; i < getParticipant(event.participants).surveyQuestions.length; i++ ){\r\n            const data ={\r\n                'questionName': getParticipant(event.participants).surveyQuestions[i].questionName,\r\n                'answer': this.state.answer[i],\r\n                'tcKimlikNo':localStorage.getItem('tc')\r\n            }\r\n            postData.push(data);\r\n        }\r\n        return postData;\r\n    }\r\n    handleTextArea(text,i){\r\n        console.log(i);\r\n        console.log(text);\r\n        let arr = [...this.state.answers];\r\n        arr[i] = text;\r\n    \r\n        this.setState({answers:arr});\r\n    }\r\n\r\n    createEventComponents(event){\r\n        number = number + 1;\r\n        console.log(event);\r\n        return(\r\n            <SurveyElementComponent\r\n                question={event.questionName}\r\n                text={this.state.answers[number-1]} \r\n                number={number}\r\n                handleChange={(text,i)=>{this.handleTextArea(text,i)}}\r\n            > \r\n            </SurveyElementComponent>\r\n        )    \r\n    }\r\n    \r\n    handleSubmit(event){\r\n        axios.put(uri+window.location.href.substring(window.location.href.indexOf(\"/surveyQuestions\")) + 16, this.getPostData(this.state.event) ).then(response=>{\r\n            if(response.data.message==='ERROR'){\r\n                console.log(response);\r\n            }\r\n            else{\r\n                history.push(\"/events\")\r\n            }\r\n        })\r\n    }      \r\n\r\n\r\n    render(){\r\n        console.log(\"asdas\")\r\n        number = 0;\r\n        return(\r\n            <div width=\"100%\">\r\n                <div style={{marginLeft:'40%'}}> <h1>{this.state.event.name} Survey </h1> </div>\r\n                <div style={{backgroundColor: 'black',height:'1px'}}></div>\r\n                <div style={{width:'80%',border:'3px solid black',borderRadius:'25px',margin:'10px auto',backgroundColor:'white'}}>\r\n                    <div style={{display:'flex',flexDirection:'column',justifyContent:'space-evenly'}}>\r\n                        {(this.state.loaded)?getParticipant(this.state.event.participants).surveyQuestions.map( surveyQuestion => this.createEventComponents(surveyQuestion) ):<div></div>}\r\n                    </div>\r\n                    <div style={{marginLeft:'80%',padding:'30px'}}>\r\n                            <Button variant=\"contained\" color=\"primary\" onClick={(event) => {this.handleSubmit(event)}}>\r\n                                Submit\r\n                            </Button>\r\n                        </div>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default SurveyElement;"]},"metadata":{},"sourceType":"module"}