{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cagri Eren\\\\Desktop\\\\tubitak-project\\\\event-manager-react\\\\src\\\\components\\\\ViewEvent\\\\ViewEvent.js\";\nimport 'date-fns';\nimport React, { Component, Fragment } from \"react\";\nimport TextField from '@material-ui/core/TextField';\nimport history from '../../history';\nimport Button from '@material-ui/core/Button';\nimport MapContainer from '../../MapContainerView';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport ViewEventHeader from './ViewEventHeader';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport axios from 'axios';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { Redirect } from 'react-router-dom/cjs/react-router-dom.min';\nimport QrCode from '../QrCode';\nconst uri = \"http://localhost:8080/events\";\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 12\n    }\n  }));\n}\n\nfunction fixDateForJSON(date) {\n  console.log(date);\n  let year = date.substring(11, 15);\n  let month = getMonthNumberFromName(date.substring(4, 7));\n  let day = date.substring(8, 10);\n  return year + '-' + month + '-' + day;\n}\n\nfunction fixTimeForJSON(date) {\n  console.log(date);\n  let hour = date.substring(16, 18);\n  let minute = date.substring(19, 21);\n  return hour + ':' + minute;\n}\n\nfunction getMonthNumberFromName(monthName) {\n  switch (monthName) {\n    case 'Jan':\n      return '01';\n\n    case 'Feb':\n      return '02';\n\n    case 'Mar':\n      return '03';\n\n    case 'Apr':\n      return '04';\n\n    case 'May':\n      return '05';\n\n    case 'Jun':\n      return '06';\n\n    case 'Jul':\n      return '07';\n\n    case 'Aug':\n      return '08';\n\n    case 'Sep':\n      return '09';\n\n    case 'Oct':\n      return '10';\n\n    case 'Nov':\n      return '11';\n\n    case 'Dec':\n      return '12';\n\n    default:\n      return \"error\";\n  }\n}\n\nlet number = 0;\n\nclass ViewEvent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      joinDone: false,\n      eventName: '',\n      eventStartDate: '',\n      eventEndDate: '',\n      eventMax: 0,\n      eventCur: 0,\n      eventLat: 0,\n      eventLng: 0,\n      mapLoaded: false,\n      name: '',\n      surname: '',\n      email: '',\n      tc: '',\n      age: 0,\n      askAge: true,\n      gender: 'male',\n      askGender: false,\n      alertType: '',\n      msg: '',\n      open: false,\n      questions: [],\n      answers: [],\n      surveyQuestions: []\n    };\n  }\n\n  componentDidMount() {\n    axios.get(uri + '/view' + window.location.href.substring(window.location.href.indexOf('/join') + 5)).then(response => {\n      let arr = [];\n      console.log(response.data.questions);\n\n      for (let i = 0; i < response.data.questions.length; i++) {\n        if (response.data.questions[i].questionName !== null) {\n          arr.push({\n            \"questionName\": response.data.questions[i].questionName,\n            \"answer\": ''\n          });\n        }\n      }\n\n      this.setState({\n        eventName: response.data.name,\n        eventStartDate: response.data.startDate.substring(8, 10) + \"-\" + response.data.startDate.substring(5, 7) + \"-\" + response.data.startDate.substring(0, 4) + \" / \" + response.data.startTime,\n        eventEndDate: response.data.endDate.substring(8, 10) + \"-\" + response.data.endDate.substring(5, 7) + \"-\" + response.data.endDate.substring(0, 4) + \" / \" + response.data.endTime,\n        eventLat: response.data.lat,\n        eventLng: response.data.lng,\n        askAge: response.data.askAge,\n        askGender: response.data.askGender,\n        questions: response.data.questions,\n        answers: arr,\n        surveyQuestions: response.data.surveyQuestions,\n        mapLoaded: true\n      });\n      console.log(this.state.answers);\n    });\n  }\n\n  createQuestionComponents(a) {\n    console.log();\n    number = number + 1;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginBottom: '5%',\n        marginTop: '5%',\n        marginLeft: '3%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: number - 1,\n      id: \"standard-basic\",\n      value: this.state.answers[number - 1].answer,\n      label: a.questionName + \"(Optional)\",\n      onChange: event => this.handleQuestionInput(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  handleClose() {\n    this.setState({\n      open: false,\n      msg: '',\n      alertType: ''\n    });\n  }\n\n  handleInput(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleQuestionInput(event) {\n    const name = event.target.name;\n    console.log(name);\n    const value = event.target.value;\n    let arr = [...this.state.answers];\n    arr[name].answer = value;\n    this.setState({\n      answers: arr\n    });\n  }\n\n  handleJoin() {\n    if (this.state.name == '' || this.state.surname == '' || this.state.tc == '' || this.state.email == '') {\n      this.setState({\n        alertType: \"error\",\n        msg: \"You must fill all the necessary parts\",\n        open: true\n      });\n      return;\n    }\n\n    if (this.state.askAge && this.state.age === 0) {\n      this.setState({\n        alertType: \"error\",\n        msg: \"You must fill all the necessary parts\",\n        open: true\n      });\n      return;\n    }\n\n    const date = \"\" + new Date();\n    let surveyArr = [];\n\n    for (let i = 0; i < this.state.surveyQuestions.length; i++) {\n      console.log(this.state.surveyQuestions[i].questionName);\n      const pushData = {\n        'questionName': this.state.surveyQuestions[i].questionName,\n        'answer': ''\n      };\n      surveyArr.push(pushData);\n    }\n\n    const postData = {\n      'name': this.state.name,\n      'surname': this.state.surname,\n      'email': this.state.email,\n      'tcKimlikNo': this.state.tc,\n      'joinDate': fixDateForJSON(date),\n      'joinTime': fixTimeForJSON(date),\n      'age': this.state.age,\n      'gender': this.state.gender,\n      'answers': this.state.answers,\n      'surveyQuestions': surveyArr\n    }; //Alert the user and pass the data to backend\n    //this.setState({ alertType: \"succes\", msg:\"Event Created\",open:!this.state.open});\n\n    axios.put(uri + window.location.href.substring(window.location.href.indexOf('/join')), postData).then(response => {\n      console.log(response);\n      console.log(postData);\n      let type;\n\n      if (response.data.messageType === 'ERROR') {\n        type = \"error\";\n      } else {\n        type = \"success\";\n      }\n\n      if (type !== \"success\") {\n        this.setState({\n          open: true,\n          msg: response.data.message,\n          alertType: 'error'\n        });\n      } else {\n        this.props.callbackAlert(response.data.message, type);\n      }\n\n      if (response.data.messageType === 'SUCCESS') {\n        this.props.callbackMidPage(this.state.eventName, this.state.tc);\n        history.push(\"/qrcode\");\n      }\n    });\n  }\n\n  render() {\n    number = 0;\n    const qr = this.state.joinDone ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/events\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 44\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 69\n      }\n    });\n    const map = this.state.mapLoaded ? /*#__PURE__*/React.createElement(MapContainer, {\n      lat: this.state.eventLat,\n      lng: this.state.eventLng,\n      width: \"400px\",\n      height: \"400px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 44\n      }\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 157\n      }\n    }, \"Loading...\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 700 + this.state.questions.length * 50 + 'px',\n        backgroundColor: \"#fafbfc\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ViewEventHeader, {\n      eventName: this.state.eventName,\n      startDate: this.state.eventStartDate,\n      endDate: this.state.eventEndDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '500px',\n        display: 'flex',\n        justifyContent: 'space-evenly'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 29\n      }\n    }, \"Fill the informations that's asked to join the event\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        flexDirection: 'row'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100px',\n        marginTop: '1em',\n        marginLeft: '1em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"name\",\n      id: \"standard-basic\",\n      value: this.state.name,\n      label: \"Name\",\n      onChange: event => this.handleInput(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100px',\n        marginTop: '1em',\n        marginLeft: '10em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"surname\",\n      id: \"standard-basic\",\n      value: this.state.surname,\n      label: \"Surname\",\n      onChange: event => this.handleInput(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 45\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100px',\n        marginTop: '1em',\n        marginLeft: '1em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"email\",\n      id: \"standard-basic\",\n      value: this.state.email,\n      label: \"Email\",\n      onChange: event => this.handleInput(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100px',\n        marginTop: '1em',\n        marginLeft: '1em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"tc\",\n      id: \"standard-basic\",\n      value: this.state.tc,\n      label: \"T.C.\",\n      onChange: event => this.handleInput(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        marginTop: '1em',\n        marginLeft: '1em',\n        justifyContent: 'flex-start',\n        flexDirection: 'row',\n        flexWrap: 'wrap'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 29\n      }\n    }, this.state.askAge ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 55\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      type: \"number\",\n      name: \"age\",\n      id: \"standard-basic\",\n      value: this.state.age,\n      label: \"Age\",\n      onChange: event => this.handleInput(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 60\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 35\n      }\n    }), this.state.askGender ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '9em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 58\n      }\n    }, \" \", /*#__PURE__*/React.createElement(RadioGroup, {\n      \"aria-label\": \"gender\",\n      name: \"gender\",\n      value: this.state.gender,\n      onChange: event => {\n        console.log(event.target.value);\n        this.setState({\n          gender: event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 91\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: \"female\",\n      control: /*#__PURE__*/React.createElement(Radio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 99\n        }\n      }),\n      label: \"Female\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 57\n      }\n    }), /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: \"male\",\n      control: /*#__PURE__*/React.createElement(Radio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 97\n        }\n      }),\n      label: \"Male\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 57\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 35\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 29\n      }\n    }, this.state.answers.map(a => this.createQuestionComponents(a))))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        alignSelf: 'flex-end'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    }, map, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '400px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        wordBreak: 'break-all'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 29\n      }\n    }, \"Description:\")))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 50 + this.state.questions.length * 50 + 'px',\n        marginRight: '50px',\n        float: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: event => this.handleJoin(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }\n    }, \"Join Event\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.state.open,\n      autoHideDuration: 3000,\n      onClose: () => this.handleClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      onClose: () => this.handleClose(),\n      severity: this.state.alertType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 25\n      }\n    }, this.state.msg))));\n  }\n\n}\n\nexport default ViewEvent;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Desktop/tubitak-project/event-manager-react/src/components/ViewEvent/ViewEvent.js"],"names":["React","Component","Fragment","TextField","history","Button","MapContainer","TextareaAutosize","ViewEventHeader","Radio","RadioGroup","axios","FormControlLabel","Snackbar","MuiAlert","Redirect","QrCode","uri","Alert","props","fixDateForJSON","date","console","log","year","substring","month","getMonthNumberFromName","day","fixTimeForJSON","hour","minute","monthName","number","ViewEvent","state","joinDone","eventName","eventStartDate","eventEndDate","eventMax","eventCur","eventLat","eventLng","mapLoaded","name","surname","email","tc","age","askAge","gender","askGender","alertType","msg","open","questions","answers","surveyQuestions","componentDidMount","get","window","location","href","indexOf","then","response","arr","data","i","length","questionName","push","setState","startDate","startTime","endDate","endTime","lat","lng","createQuestionComponents","a","marginBottom","marginTop","marginLeft","answer","event","handleQuestionInput","handleClose","handleInput","target","value","handleJoin","Date","surveyArr","pushData","postData","put","type","messageType","message","callbackAlert","callbackMidPage","render","qr","map","height","backgroundColor","display","justifyContent","flexDirection","flexWrap","alignSelf","width","wordBreak","marginRight","float"],"mappings":"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","sourcesContent":["import 'date-fns';\r\nimport React, {Component,Fragment} from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport history from '../../history';\r\nimport Button from '@material-ui/core/Button';\r\nimport MapContainer from '../../MapContainerView';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport ViewEventHeader from  './ViewEventHeader';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport axios from 'axios';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { Redirect } from 'react-router-dom/cjs/react-router-dom.min';\r\n\r\nimport QrCode from '../QrCode';\r\n\r\n\r\nconst uri = \"http://localhost:8080/events\"\r\n\r\nfunction Alert(props) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n\r\nfunction fixDateForJSON(date){\r\n    console.log(date);\r\n\r\n    let year = date.substring(11,15);\r\n    let month = getMonthNumberFromName(date.substring(4,7));\r\n    let day = date.substring(8,10);\r\n    \r\n    return year+'-'+month+'-'+day;\r\n}\r\nfunction fixTimeForJSON(date){\r\n    console.log(date);\r\n    let hour = date.substring(16,18);\r\n    let minute = date.substring(19,21);\r\n    return hour+':'+minute;\r\n}\r\n\r\nfunction getMonthNumberFromName(monthName){\r\n    switch(monthName){\r\n        case 'Jan':\r\n            return '01';\r\n        case 'Feb':\r\n            return '02';\r\n        case 'Mar':\r\n            return '03';\r\n        case 'Apr':\r\n            return '04';\r\n        case 'May':\r\n            return '05';\r\n        case 'Jun':\r\n            return '06';\r\n        case 'Jul':\r\n            return '07';\r\n        case 'Aug':\r\n            return '08';\r\n        case 'Sep':\r\n            return '09';\r\n        case 'Oct':\r\n            return '10';\r\n        case 'Nov':\r\n            return '11';\r\n        case 'Dec':\r\n            return '12';\r\n        default:\r\n            return \"error\";\r\n    }\r\n}\r\n\r\nlet number = 0;\r\nclass ViewEvent extends Component{\r\n    state={\r\n        joinDone:false,\r\n        eventName:'',\r\n        eventStartDate:'',\r\n        eventEndDate:'',\r\n        eventMax:0,\r\n        eventCur:0,\r\n        eventLat:0,\r\n        eventLng:0,\r\n        mapLoaded:false,\r\n\r\n        name:'',\r\n        surname:'',\r\n        email:'',\r\n        tc: '',\r\n\r\n        age:0,\r\n        askAge:true,\r\n        gender:'male',\r\n        askGender:false,\r\n\r\n        alertType:'',\r\n        msg:'',\r\n        open:false,\r\n\r\n        questions:[],\r\n        answers:[],\r\n        surveyQuestions:[]\r\n    }\r\n    componentDidMount(){\r\n        axios.get(uri + '/view' +window.location.href.substring(window.location.href.indexOf('/join')+5)).then(response=>{\r\n            let arr = [];\r\n            console.log(response.data.questions)\r\n            for( let i = 0; i < response.data.questions.length; i++ ){\r\n                if( response.data.questions[i].questionName !== null ){\r\n                    arr.push({\r\n                        \"questionName\": response.data.questions[i].questionName,\r\n                        \"answer\": ''\r\n                    })\r\n                }\r\n            }\r\n            this.setState({\r\n                eventName:response.data.name,\r\n                eventStartDate: response.data.startDate.substring(8,10) + \"-\" + response.data.startDate.substring(5,7) + \"-\" + response.data.startDate.substring(0,4)\r\n                + \" / \" + response.data.startTime,\r\n                eventEndDate: response.data.endDate.substring(8,10) + \"-\" + response.data.endDate.substring(5,7) + \"-\" + response.data.endDate.substring(0,4)\r\n                + \" / \" + response.data.endTime,\r\n                eventLat: response.data.lat,\r\n                eventLng: response.data.lng,\r\n                askAge: response.data.askAge,\r\n                askGender: response.data.askGender,\r\n                questions: response.data.questions,\r\n                answers: arr,\r\n                surveyQuestions:response.data.surveyQuestions,\r\n                mapLoaded:true\r\n            })\r\n            console.log(this.state.answers)\r\n        })\r\n    }\r\n    createQuestionComponents(a){\r\n        console.log()\r\n        number = number + 1;\r\n        return(\r\n            <div style={{marginBottom:'5%',marginTop:'5%',marginLeft:'3%'}}>\r\n                <TextField name= { number - 1 } id=\"standard-basic\" value={this.state.answers[number-1].answer} label={a.questionName+\"(Optional)\"} onChange={(event)=>this.handleQuestionInput(event)}/>\r\n            </div>\r\n        )\r\n    }\r\n    handleClose(){\r\n        this.setState({open:false,msg:'',alertType:''});\r\n    }\r\n    handleInput(event){\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    handleQuestionInput(event){\r\n        const name = event.target.name;\r\n        console.log(name)\r\n        const value = event.target.value;\r\n\r\n        let arr = [...this.state.answers];\r\n        arr[name].answer = value;\r\n        this.setState({\r\n            answers:arr\r\n        })\r\n    }\r\n\r\n    handleJoin(){\r\n        if(this.state.name=='' || this.state.surname=='' || this.state.tc =='' ||this.state.email==''){\r\n            this.setState({ alertType: \"error\", msg:\"You must fill all the necessary parts\",open:true});\r\n            return;\r\n        }\r\n        if( this.state.askAge && this.state.age===0){\r\n            this.setState({ alertType: \"error\", msg:\"You must fill all the necessary parts\",open:true});\r\n            return;\r\n        }\r\n        const date = \"\" +new Date();\r\n        let surveyArr =[];\r\n        for( let i = 0; i < this.state.surveyQuestions.length; i++){\r\n            console.log(this.state.surveyQuestions[i].questionName);\r\n            const pushData ={\r\n                'questionName':this.state.surveyQuestions[i].questionName,\r\n                'answer':''\r\n            }\r\n            surveyArr.push(pushData);\r\n        }\r\n        const postData ={\r\n            'name':this.state.name,\r\n            'surname':this.state.surname,\r\n            'email':this.state.email,\r\n            'tcKimlikNo':this.state.tc,\r\n            'joinDate': fixDateForJSON(  date ),\r\n            'joinTime': fixTimeForJSON( date ),\r\n            'age':this.state.age,\r\n            'gender':this.state.gender,\r\n            'answers':this.state.answers,\r\n            'surveyQuestions':surveyArr\r\n        };\r\n        //Alert the user and pass the data to backend\r\n        //this.setState({ alertType: \"succes\", msg:\"Event Created\",open:!this.state.open});\r\n        axios.put(uri + (window.location.href.substring(window.location.href.indexOf('/join'))),postData).then(response=>{\r\n            console.log(response);\r\n            console.log(postData);\r\n                let type;\r\n                if( response.data.messageType === 'ERROR' ){\r\n                    type = \"error\";\r\n                }\r\n                else{\r\n                    type = \"success\";\r\n                }\r\n                if( type !== \"success\"  ){\r\n                    this.setState({\r\n                        open:true,\r\n                        msg:response.data.message,\r\n                        alertType:'error'\r\n                    })\r\n                }\r\n                else{\r\n                    this.props.callbackAlert(response.data.message,type);\r\n                }\r\n                if(response.data.messageType === 'SUCCESS'){\r\n                    this.props.callbackMidPage(this.state.eventName,this.state.tc)\r\n                    history.push(\"/qrcode\")\r\n                \r\n                }\r\n        });\r\n\r\n    }\r\n\r\n    render(){\r\n        number = 0;\r\n        const qr = (this.state.joinDone) ? <Redirect to=\"/events\"/>:<div></div>;\r\n\r\n        const map = this.state.mapLoaded ? <MapContainer lat={this.state.eventLat} lng={this.state.eventLng} width='400px' height='400px'></MapContainer> : <p>Loading...</p>;\r\n        return(\r\n            <div style={{height: (700 + (this.state.questions.length*50)) + 'px'  ,backgroundColor:\"#fafbfc\"}}>\r\n                <ViewEventHeader eventName={this.state.eventName} startDate={this.state.eventStartDate} endDate={this.state.eventEndDate}></ViewEventHeader>\r\n                    <div style={{height:'500px',display:'flex',justifyContent:'space-evenly'}}>\r\n                    <div>\r\n                        <form>\r\n                            <p>Fill the informations that's asked to join the event</p>\r\n                            <div style={{display:'flex', justifyContent:'flex-start',flexDirection:'row'}}>\r\n                                <div style={{height:'100px', marginTop:'1em', marginLeft:'1em'}}>\r\n                                            <TextField name= \"name\" id=\"standard-basic\" value={this.state.name} label=\"Name\" onChange={(event)=>this.handleInput(event)}/>\r\n                                </div>\r\n                                <div style={{height:'100px', marginTop:'1em', marginLeft:'10em'}}>\r\n                                            <TextField name= \"surname\" id=\"standard-basic\" value={this.state.surname} label=\"Surname\" onChange={(event)=>this.handleInput(event)}/>\r\n                                </div>\r\n                            </div>\r\n                            <div style={{height:'100px', marginTop:'1em', marginLeft:'1em'}}>\r\n                                <TextField name= \"email\" id=\"standard-basic\" value={this.state.email} label=\"Email\" onChange={(event)=>this.handleInput(event)}/>\r\n                            </div>\r\n                            <div style={{height:'100px', marginTop:'1em', marginLeft:'1em'}}>\r\n                                <TextField name= \"tc\" id=\"standard-basic\" value={this.state.tc} label=\"T.C.\" onChange={(event)=>this.handleInput(event)}/>\r\n                            </div>\r\n                            <div style={{display:'flex', marginTop:'1em', marginLeft:'1em',justifyContent:'flex-start',flexDirection:'row',flexWrap:'wrap'}}>\r\n                                {(this.state.askAge)?(<div><TextField type=\"number\" name= \"age\" id=\"standard-basic\" value={this.state.age} label=\"Age\" onChange={(event)=>this.handleInput(event)}/></div>)\r\n                                :(<div></div>)}\r\n                                {(this.state.askGender)?(<div style={{marginLeft:'9em'}}> <RadioGroup aria-label=\"gender\" name=\"gender\" value={this.state.gender} onChange={(event)=>{console.log(event.target.value);this.setState({gender:event.target.value})}}>\r\n                                                        <FormControlLabel value=\"female\" control={<Radio />} label=\"Female\" />\r\n                                                        <FormControlLabel value=\"male\" control={<Radio />} label=\"Male\" />\r\n                                                    </RadioGroup></div>)\r\n                                :(<div></div>)}\r\n                            </div>\r\n                            <div>\r\n                                {this.state.answers.map( a => this.createQuestionComponents(a) )}\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div style={{alignSelf:'flex-end'}}>\r\n                        {map}\r\n                        <div style={{width:'400px'}}>\r\n                            <p style={{wordBreak:'break-all'}}>Description:</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{marginTop:(50 + (this.state.questions.length*50))+'px',marginRight:'50px',float:'right'}}>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={(event) => this.handleJoin(event)}>\r\n                            Join Event\r\n                    </Button>\r\n                </div>\r\n                <div>\r\n                    <Snackbar open={this.state.open} autoHideDuration={3000} onClose={()=>this.handleClose()}>\r\n                        <Alert onClose={()=>this.handleClose()} severity={this.state.alertType}>\r\n                            {this.state.msg}\r\n                        </Alert>\r\n                    </Snackbar>                \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ViewEvent;"]},"metadata":{},"sourceType":"module"}