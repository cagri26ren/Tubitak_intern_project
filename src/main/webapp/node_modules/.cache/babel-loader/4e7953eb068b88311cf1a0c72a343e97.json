{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cagri Eren\\\\Desktop\\\\tubitak-project\\\\event-manager-react\\\\src\\\\components\\\\Main\\\\Main.js\";\nimport React, { Component } from \"react\";\nimport HomepageHeader from './HomepageHeader';\nimport EventComponent from './EventComponent';\nimport axios from 'axios';\nimport { UserContext } from \"../../UserContext\";\nimport Pagination from '@material-ui/lab/Pagination';\nconst uriU = \"http://localhost:8080/events\";\nconst uriA = \"http://localhost:8080/events/admin\";\n\nclass Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: UserContext,\n      page: 1,\n      allEvents: [],\n      events: []\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.page === nextState.page) {\n      return false;\n    }\n\n    return true;\n  }\n\n  createEventComponents(event) {\n    return /*#__PURE__*/React.createElement(EventComponent, {\n      header: event.name,\n      currentPeople: event.current,\n      maxPeople: event.max,\n      lat: event.lat,\n      lng: event.lng,\n      startTime: event.startDate.substring(8, 10) + \"-\" + event.startDate.substring(5, 7) + \"-\" + event.startDate.substring(0, 4) + \" / \" + event.startTime.substring(0, 5),\n      endTime: event.endDate.substring(8, 10) + \"-\" + event.endDate.substring(5, 7) + \"-\" + event.endDate.substring(0, 4) + \" / \" + event.endTime.substring(0, 5),\n      callbackAlert: (msg, alertType) => {\n        this.props.callbackAlert(msg, alertType);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }\n    });\n  }\n\n  componentDidMount() {\n    let uri = this.state.user === null ? uriU : uriA;\n    document.addEventListener('scroll', this.trackScrolling);\n    axios.get(uri).then(response => {\n      this.setState({\n        allEvents: response.data,\n        events: response.data.slice(0, 5)\n      });\n      console.log(this.state.allEvents);\n    });\n  }\n\n  handlePageChange(event, newPage) {\n    let arr = [...this.state.allEvents].slice(newPage * 5 - 5, newPage * 5);\n    this.setState({\n      page: newPage,\n      events: arr\n    });\n  }\n\n  render() {\n    let pagination = this.state.allEvents.length >= 5 ? /*#__PURE__*/React.createElement(Pagination, {\n      count: Math.ceil(this.state.allEvents.length / 5),\n      page: this.state.page,\n      color: \"primary\",\n      onChange: (event, newPage) => {\n        this.handlePageChange(event, newPage);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 62\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"scrollA\",\n      onScroll: this.handleScroll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(HomepageHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: 'black',\n        height: '1px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, this.state.events.map(event => this.createEventComponents(event)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: 'right',\n        margin: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, pagination));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Desktop/tubitak-project/event-manager-react/src/components/Main/Main.js"],"names":["React","Component","HomepageHeader","EventComponent","axios","UserContext","Pagination","uriU","uriA","Main","state","user","page","allEvents","events","shouldComponentUpdate","nextProps","nextState","createEventComponents","event","name","current","max","lat","lng","startDate","substring","startTime","endDate","endTime","msg","alertType","props","callbackAlert","componentDidMount","uri","document","addEventListener","trackScrolling","get","then","response","setState","data","slice","console","log","handlePageChange","newPage","arr","render","pagination","length","Math","ceil","handleScroll","backgroundColor","height","map","float","margin"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport HomepageHeader from './HomepageHeader';\r\nimport EventComponent from './EventComponent';\r\nimport axios from 'axios';\r\nimport { UserContext } from \"../../UserContext\";\r\nimport Pagination from '@material-ui/lab/Pagination';\r\n\r\nconst uriU = \"http://localhost:8080/events\"\r\nconst uriA = \"http://localhost:8080/events/admin\"\r\n\r\n\r\nclass Main extends Component{\r\n    state={\r\n        user:UserContext,\r\n        page:1,\r\n        allEvents:[],\r\n        events:[]\r\n    }\r\n    shouldComponentUpdate(nextProps,nextState){\r\n        if(this.state.page === nextState.page){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    createEventComponents(event){\r\n        return (<EventComponent \r\n            header={event.name} \r\n            currentPeople={event.current} \r\n            maxPeople={event.max} \r\n            lat={event.lat}\r\n            lng={event.lng}\r\n            startTime={event.startDate.substring(8,10) + \"-\" + event.startDate.substring(5,7) + \"-\" + event.startDate.substring(0,4) \r\n            + \" / \" + (event.startTime).substring(0,5)}\r\n            endTime={event.endDate.substring(8,10) + \"-\" + event.endDate.substring(5,7) + \"-\" + event.endDate.substring(0,4) \r\n            + \" / \" + (event.endTime).substring(0,5)}\r\n            callbackAlert={(msg,alertType)=>{this.props.callbackAlert(msg,alertType)}}\r\n        ></EventComponent>);\r\n    }\r\n    componentDidMount(){\r\n        let uri = (this.state.user===null)?(uriU):(uriA);\r\n        document.addEventListener('scroll', this.trackScrolling);\r\n        axios.get(uri).then(response =>{\r\n            this.setState({allEvents:response.data,events:response.data.slice(0,5)})\r\n            console.log(this.state.allEvents)\r\n        })\r\n    }\r\n\r\n    handlePageChange(event,newPage){\r\n        let arr = [...this.state.allEvents].slice(newPage*5 - 5 , newPage * 5);\r\n\r\n        this.setState({page:newPage,events:arr});\r\n    }\r\n\r\n    render(){\r\n        let pagination = (this.state.allEvents.length >= 5) ?<Pagination count={Math.ceil(this.state.allEvents.length/5)} page={this.state.page} color=\"primary\" onChange={(event,newPage)=>{this.handlePageChange(event,newPage)}} />\r\n        : <div></div>\r\n        return(\r\n            <div>\r\n                <div id='scrollA'  onScroll={this.handleScroll}>\r\n                    <HomepageHeader></HomepageHeader>\r\n                    <div style={{backgroundColor: 'black',height:'1px'}}></div>\r\n                    <div>\r\n                        {this.state.events.map( event => this.createEventComponents(event) )}\r\n                    </div>\r\n                </div>\r\n                <div style={{float:'right',margin:'2%'}}>\r\n                    {pagination}\r\n                </div>\r\n            </div>   \r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default Main;"]},"metadata":{},"sourceType":"module"}