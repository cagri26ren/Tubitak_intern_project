{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cagri Eren\\\\Desktop\\\\tubitak-project\\\\event-manager-react\\\\src\\\\components\\\\Main\\\\Main.js\";\nimport React, { Component } from \"react\";\nimport HomepageHeader from './HomepageHeader';\nimport EventComponent from './EventComponent';\nimport axios from 'axios';\nimport { UserContext } from \"../../UserContext\";\nconst uri = \"http://localhost:8080/events/\";\n\nfunction createEventComponents(event) {\n  return /*#__PURE__*/React.createElement(EventComponent, {\n    header: event.name,\n    currentPeople: event.current,\n    maxPeople: event.max,\n    lat: event.lat,\n    lng: event.lng,\n    startTime: event.startDate + \" / \" + event.startTime.substring(0, 5),\n    endTime: event.endDate + \" / \" + event.endTime.substring(0, 5),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 13\n    }\n  });\n}\n\nlet change = true;\n\nclass Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: UserContext,\n      page: 0,\n      events: []\n    };\n\n    this.trackScrolling = () => {\n      const wrappedElement = document.getElementById('header');\n\n      if (change === true) {\n        change = false;\n\n        if (this.isBottom(wrappedElement)) {\n          const arr = [...this.state.events];\n          axios.get(uri + \"\" + (this.state.page + 1)).then(response => {\n            if (response.data[0] !== undefined) {\n              arr.push(response.data[0]);\n            }\n\n            if (response.data[1] !== undefined) {\n              arr.push(response.data[1]);\n            }\n\n            console.log(arr);\n            this.setState(prevState => {\n              return {\n                page: prevState.page + 1,\n                events: response.data\n              };\n            });\n          });\n        }\n\n        setTimeout(() => {\n          this.ac();\n        }, 3000);\n      }\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('scroll', this.trackScrolling);\n    axios.get(uri + \"\" + this.state.page).then(response => {\n      this.setState({\n        events: response.data\n      });\n      console.log(this.state.events);\n    });\n  }\n\n  isBottom(scroller) {\n    return scroller.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n\n  ac() {\n    console.log(\"sdfasd\");\n    change = true;\n    return true;\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"scrollA\",\n      onScroll: this.handleScroll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(HomepageHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: 'black',\n        height: '1px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '618px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, this.state.events.map(event => createEventComponents(event))));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Desktop/tubitak-project/event-manager-react/src/components/Main/Main.js"],"names":["React","Component","HomepageHeader","EventComponent","axios","UserContext","uri","createEventComponents","event","name","current","max","lat","lng","startDate","startTime","substring","endDate","endTime","change","Main","state","user","page","events","trackScrolling","wrappedElement","document","getElementById","isBottom","arr","get","then","response","data","undefined","push","console","log","setState","prevState","setTimeout","ac","componentDidMount","addEventListener","scroller","getBoundingClientRect","bottom","window","innerHeight","componentWillUnmount","removeEventListener","render","handleScroll","backgroundColor","height","map"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport HomepageHeader from './HomepageHeader';\r\nimport EventComponent from './EventComponent';\r\nimport axios from 'axios';\r\nimport { UserContext } from \"../../UserContext\";\r\nconst uri = \"http://localhost:8080/events/\"\r\n\r\nfunction createEventComponents(event){\r\n    return (<EventComponent \r\n        header={event.name} \r\n        currentPeople={event.current} \r\n        maxPeople={event.max} \r\n        lat={event.lat}\r\n        lng={event.lng}\r\n        startTime={event.startDate + \" / \" + (event.startTime).substring(0,5)}\r\n        endTime={event.endDate + \" / \" + (event.endTime).substring(0,5)}\r\n    ></EventComponent>);\r\n}\r\nlet change = true;\r\nclass Main extends Component{\r\n    state={\r\n        user:UserContext,\r\n        page:0,\r\n        events:[]\r\n    }\r\n    componentDidMount(){\r\n        document.addEventListener('scroll', this.trackScrolling);\r\n        axios.get(uri+ \"\" + this.state.page).then(response =>{\r\n            this.setState({events:response.data})\r\n            console.log(this.state.events)\r\n        })\r\n    }\r\n\r\n    isBottom(scroller) {\r\n        return scroller.getBoundingClientRect().bottom <= window.innerHeight;\r\n    }\r\n    ac(){\r\n        console.log(\"sdfasd\")\r\n        change = true;\r\n        return true;\r\n    }\r\n      \r\n    componentWillUnmount() {\r\n        document.removeEventListener('scroll', this.trackScrolling);\r\n    }\r\n    trackScrolling = () => {\r\n        const wrappedElement = document.getElementById('header');\r\n        if( change === true ){\r\n            change=false;\r\n            if (this.isBottom(wrappedElement)) {\r\n                const arr = [...(this.state.events)];\r\n                axios.get(uri + \"\" + (this.state.page + 1 )).then(response=>{\r\n                    if( response.data[0] !== undefined ){\r\n                        arr.push(response.data[0])\r\n                    }\r\n                    if( response.data[1] !== undefined ){\r\n                        arr.push(response.data[1])\r\n                    }\r\n                    console.log(arr);\r\n                    this.setState(prevState=> {\r\n                        return{\r\n                            page: prevState.page + 1,\r\n                            events: response.data\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n            setTimeout(()=>{this.ac()},3000);\r\n        }\r\n    };\r\n\r\n    render(){\r\n        return(\r\n            <div id='scrollA' onScroll={this.handleScroll}>\r\n                <HomepageHeader></HomepageHeader>\r\n                <div style={{backgroundColor: 'black',height:'1px'}}></div>\r\n                <div style={{height:'618px'}} >\r\n                    {this.state.events.map( event => createEventComponents(event) )}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default Main;"]},"metadata":{},"sourceType":"module"}