{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cagri Eren\\\\Documents\\\\GitHub\\\\Tubitak_intern_project\\\\WebApplication\\\\src\\\\main\\\\webapp\\\\src\\\\components\\\\Main\\\\Main.js\";\nimport React, { Component } from \"react\";\nimport HomepageHeader from './HomepageHeader';\nimport EventComponent from './EventComponent';\nimport axios from 'axios';\nimport { UserContext } from \"../../UserContext\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nconst uriU = \"http://localhost:8080/events\";\nconst uriA = \"http://localhost:8080/events/admin\";\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 12\n    }\n  }));\n}\n\nclass Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      allEvents: [],\n      events: [],\n      theMsg: '',\n      open: false,\n      theAlertType: ''\n    };\n  }\n\n  handleClose() {\n    this.setState({\n      open: false\n    });\n  }\n\n  handleCallBack(msg, alertType) {\n    console.log(msg);\n    console.log(\"entered handle\");\n    this.setState({\n      theMsg: msg + '',\n      theAlertType: alertType,\n      open: true\n    });\n  }\n\n  createEventComponents(event) {\n    return /*#__PURE__*/React.createElement(EventComponent, {\n      header: event.name,\n      currentPeople: event.current,\n      maxPeople: event.max,\n      lat: event.lat,\n      lng: event.lng,\n      buttonTime: event.startDate + \"T\" + event.startTime,\n      startTime: event.startDate.substring(8, 10) + \"-\" + event.startDate.substring(5, 7) + \"-\" + event.startDate.substring(0, 4) + \" / \" + event.startTime.substring(0, 5),\n      endTime: event.endDate.substring(8, 10) + \"-\" + event.endDate.substring(5, 7) + \"-\" + event.endDate.substring(0, 4) + \" / \" + event.endTime.substring(0, 5),\n      callbackAlert: (msg, alertType) => {\n        this.handleCallBack(msg + \"\", alertType);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    });\n  }\n\n  componentDidMount() {\n    console.log(this.props.contextUser);\n    let uri = this.props.contextUser === null ? uriU : uriA;\n    console.log(uri);\n    document.addEventListener('scroll', this.trackScrolling);\n    axios.get(uri).then(response => {\n      this.setState({\n        change: false,\n        allEvents: response.data,\n        events: response.data.slice(0, 5)\n      });\n      console.log(this.state.allEvents);\n    });\n  }\n\n  handlePageChange(event, newPage) {\n    let arr = [...this.state.allEvents].slice(newPage * 5 - 5, newPage * 5);\n    this.setState({\n      page: newPage,\n      events: arr\n    });\n  }\n\n  render() {\n    let pagination = this.state.allEvents.length >= 5 ? /*#__PURE__*/React.createElement(Pagination, {\n      count: Math.ceil(this.state.allEvents.length / 5),\n      page: this.state.page,\n      color: \"primary\",\n      onChange: (event, newPage) => {\n        this.handlePageChange(event, newPage);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 62\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100%',\n        backgroundColor: '#fafbfc'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"scrollA\",\n      onScroll: this.handleScroll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(HomepageHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: 'black',\n        height: '1px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 100 + this.state.events.length * 320 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, this.state.events.map(event => this.createEventComponents(event)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: 'right',\n        margin: '2%',\n        backgroundColor: '#fafbfc'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, pagination), /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.state.open,\n      autoHideDuration: 3000,\n      onClose: () => this.handleClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      onClose: () => this.handleClose(),\n      severity: this.state.theAlertType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, this.state.theMsg)));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Documents/GitHub/Tubitak_intern_project/WebApplication/src/main/webapp/src/components/Main/Main.js"],"names":["React","Component","HomepageHeader","EventComponent","axios","UserContext","Pagination","Snackbar","MuiAlert","uriU","uriA","Alert","props","Main","state","page","allEvents","events","theMsg","open","theAlertType","handleClose","setState","handleCallBack","msg","alertType","console","log","createEventComponents","event","name","current","max","lat","lng","startDate","startTime","substring","endDate","endTime","componentDidMount","contextUser","uri","document","addEventListener","trackScrolling","get","then","response","change","data","slice","handlePageChange","newPage","arr","render","pagination","length","Math","ceil","height","backgroundColor","handleScroll","map","float","margin"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport HomepageHeader from './HomepageHeader';\nimport EventComponent from './EventComponent';\nimport axios from 'axios';\nimport { UserContext } from \"../../UserContext\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nconst uriU = \"http://localhost:8080/events\"\nconst uriA = \"http://localhost:8080/events/admin\"\n\n\nfunction Alert(props) {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n  }\n\nclass Main extends Component{\n\n    state={\n        page:1,\n        allEvents:[],\n        events:[],\n        theMsg:'',\n        open:false,\n        theAlertType:''\n    }\n\n\n    handleClose(){\n        this.setState({open:false})\n    }\n    \n    handleCallBack(msg,alertType){\n        console.log(msg);\n        console.log(\"entered handle\");\n       this.setState({\n           theMsg:msg+'',\n           theAlertType:alertType,\n           open:true\n       })\n    }\n    createEventComponents(event){\n        return (<EventComponent \n            header={event.name} \n            currentPeople={event.current} \n            maxPeople={event.max} \n            lat={event.lat}\n            lng={event.lng}\n            buttonTime={event.startDate+\"T\"+event.startTime}\n            startTime={event.startDate.substring(8,10) + \"-\" + event.startDate.substring(5,7) + \"-\" + event.startDate.substring(0,4) \n            + \" / \" + (event.startTime).substring(0,5)}\n            endTime={event.endDate.substring(8,10) + \"-\" + event.endDate.substring(5,7) + \"-\" + event.endDate.substring(0,4) \n            + \" / \" + (event.endTime).substring(0,5)}\n            callbackAlert={(msg,alertType)=>{this.handleCallBack(msg+\"\",alertType)}}\n            \n        ></EventComponent>);\n    }\n    componentDidMount(){\n        console.log(this.props.contextUser)\n        let uri = (this.props.contextUser===null)?(uriU):(uriA);\n        console.log(uri);\n        document.addEventListener('scroll', this.trackScrolling);\n        axios.get(uri).then(response =>{\n            this.setState({change:false,allEvents:response.data,events:response.data.slice(0,5)})\n            console.log(this.state.allEvents)\n        })\n    }\n\n    handlePageChange(event,newPage){\n        let arr = [...this.state.allEvents].slice(newPage*5 - 5 , newPage * 5);\n\n        this.setState({page:newPage,events:arr});\n    }\n\n    render(){\n        let pagination = (this.state.allEvents.length >= 5) ?<Pagination count={Math.ceil(this.state.allEvents.length/5)} page={this.state.page} color=\"primary\" onChange={(event,newPage)=>{this.handlePageChange(event,newPage)}} />\n        : <div></div>\n        return(\n            <div style={{height:'100%',backgroundColor: '#fafbfc'}}>\n                <div id='scrollA'  onScroll={this.handleScroll}>\n                    <HomepageHeader></HomepageHeader>\n                    <div style={{backgroundColor: 'black',height:'1px'}}></div>\n                    <div style={{height:( 100+(this.state.events.length * 320 ) + 'px')}}>\n                        {this.state.events.map( event => this.createEventComponents(event) )}\n                    </div>\n                </div>\n                <div style={{float:'right',margin:'2%',backgroundColor: '#fafbfc'}}>\n                    {pagination}\n                </div>\n                <Snackbar open={this.state.open} autoHideDuration={3000} onClose={()=>this.handleClose()}>\n                    <Alert onClose={()=>this.handleClose()} severity={this.state.theAlertType}>\n                        {this.state.theMsg}\n                    </Alert>\n                </Snackbar>\n            </div>   \n        )\n    }\n}\n\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}