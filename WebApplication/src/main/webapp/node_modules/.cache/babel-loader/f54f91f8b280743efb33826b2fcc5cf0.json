{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cagri Eren\\\\Desktop\\\\tubitak-project\\\\event-manager-react\\\\src\\\\components\\\\Report\\\\Report.js\";\nimport 'date-fns';\nimport React, { Component, Fragment } from \"react\";\nimport TextField from '@material-ui/core/TextField';\nimport history from '../../history';\nimport DateSection from '../DateSection';\nimport Alert from '../Alert';\nimport Button from '@material-ui/core/Button';\nimport Pagination from '@material-ui/lab/Pagination';\nimport MapContainer from '../../MapContainer';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport ReportHeader from './ReportHeader';\nimport ReportComponent from './ReportComponent';\nimport Chart from '../Chart';\nimport axios from 'axios';\nconst uri = \"http://localhost:8080/reports\";\nlet number = 0;\n\nfunction createReportComponents(event) {\n  number = number + 1;\n  return /*#__PURE__*/React.createElement(ReportComponent, {\n    number: number,\n    name: event.name,\n    time: event.startDate.substring(8, 10) + \"-\" + event.startDate.substring(5, 7) + \"-\" + event.startDate.substring(0, 4) + \"/\" + event.startTime.substring(0, 5) + \"  -  \" + event.endDate.substring(8, 10) + \"-\" + event.endDate.substring(5, 7) + \"-\" + event.endDate.substring(0, 4) + \"/\" + event.endTime.substring(0, 5),\n    people: event.current + \"/\" + event.max,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  });\n}\n\nfunction chartLogic(data) {\n  let chartData = {\n    labels: [],\n    datasets: [{\n      label: 'Event',\n      data: [],\n      backgroundColor: []\n    }]\n  };\n\n  for (let i = 0; i < data.length; i++) {\n    chartData.labels.push(data[i].name);\n    chartData.datasets[0].data.push(data[i].current);\n    chartData.datasets[0].backgroundColor.push('blue');\n  }\n\n  return chartData;\n}\n\nclass Report extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      events: [],\n      allEvents: [],\n      open: \"\",\n      msg: \"\",\n      alertType: \"\",\n      page: 1\n    };\n  }\n\n  componentDidMount() {\n    axios.get(uri).then(response => {\n      this.setState({\n        allEvents: response.data,\n        events: response.data.slice(0, 10)\n      });\n      console.log(this.state.allEvents);\n    });\n  }\n\n  handlePageChange(event, newPage) {\n    let arr = [...this.state.allEvents].slice(newPage * 10 - 10, newPage * 10);\n    this.setState({\n      page: newPage,\n      events: arr\n    });\n  }\n\n  render() {\n    let pagination = this.state.allEvents.length >= 10 ? /*#__PURE__*/React.createElement(Pagination, {\n      count: Math.ceil(this.state.allEvents.length / 10),\n      page: this.state.page,\n      color: \"primary\",\n      onChange: (event, newPage) => {\n        this.handlePageChange(event, newPage);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 63\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReportHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"40%\",\n        margin: '20px auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Chart, {\n      chartData: chartLogic(this.state.allEvents),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, this.state.events.map(event => createReportComponents(event))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: 'right',\n        margin: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, pagination), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      alertType: this.state.alertType,\n      msg: this.state.msg,\n      open: this.state.open,\n      alertClose: () => this.setState({\n        open: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default Report;","map":{"version":3,"sources":["C:/Users/Cagri Eren/Desktop/tubitak-project/event-manager-react/src/components/Report/Report.js"],"names":["React","Component","Fragment","TextField","history","DateSection","Alert","Button","Pagination","MapContainer","TextareaAutosize","ReportHeader","ReportComponent","Chart","axios","uri","number","createReportComponents","event","name","startDate","substring","startTime","endDate","endTime","current","max","chartLogic","data","chartData","labels","datasets","label","backgroundColor","i","length","push","Report","constructor","props","state","events","allEvents","open","msg","alertType","page","componentDidMount","get","then","response","setState","slice","console","log","handlePageChange","newPage","arr","render","pagination","Math","ceil","width","margin","map","float"],"mappings":"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","sourcesContent":["import 'date-fns';\r\nimport React, {Component,Fragment} from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport history from '../../history';\r\nimport DateSection from '../DateSection';\r\nimport Alert from '../Alert'\r\nimport Button from '@material-ui/core/Button';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport MapContainer from '../../MapContainer';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport ReportHeader from './ReportHeader';\r\nimport ReportComponent from './ReportComponent';\r\nimport Chart from '../Chart';\r\nimport axios from 'axios';\r\n\r\nconst uri = \"http://localhost:8080/reports\";\r\n\r\nlet number = 0;\r\nfunction createReportComponents(event){\r\n    number = number + 1;\r\n    return(\r\n        <ReportComponent\r\n            number = {number}\r\n            name={event.name} \r\n            time={event.startDate.substring(8,10) + \"-\"+ event.startDate.substring(5,7) + \"-\"+ event.startDate.substring(0,4) + \"/\" + event.startTime.substring(0,5)\r\n                +\"  -  \" + event.endDate.substring(8,10) + \"-\"+ event.endDate.substring(5,7) + \"-\"+ event.endDate.substring(0,4) + \"/\" + event.endTime.substring(0,5)} \r\n            people={event.current + \"/\" + event.max}>\r\n        </ReportComponent>\r\n    )\r\n}\r\n\r\nfunction chartLogic( data ){\r\n    let chartData = {\r\n        labels:[],\r\n        datasets:[{\r\n            label:'Event',\r\n            data:[],\r\n            backgroundColor:[]\r\n        }]\r\n    }\r\n    for( let i = 0; i < data.length; i++ ){\r\n        chartData.labels.push(data[i].name);\r\n        chartData.datasets[0].data.push(data[i].current);\r\n        chartData.datasets[0].backgroundColor.push('blue');\r\n    }\r\n    return chartData;\r\n}\r\n\r\n\r\nclass Report extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            events:[],\r\n            allEvents:[],\r\n            open:\"\",\r\n            msg:\"\",\r\n            alertType:\"\",\r\n            page:1\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        axios.get(uri).then(response => {\r\n            this.setState({allEvents:response.data,events:response.data.slice(0,10)})\r\n            console.log(this.state.allEvents)\r\n        });\r\n    }\r\n\r\n    handlePageChange(event,newPage){\r\n        let arr = [...this.state.allEvents].slice(newPage*10 - 10 , newPage * 10);\r\n\r\n        this.setState({page:newPage,events:arr});\r\n    }\r\n      \r\n\r\n\r\n    render(){\r\n        let pagination = (this.state.allEvents.length >= 10) ?<Pagination count={Math.ceil(this.state.allEvents.length/10)} page={this.state.page} color=\"primary\" onChange={(event,newPage)=>{this.handlePageChange(event,newPage)}} />\r\n        : <div></div>\r\n        return(\r\n            <div>\r\n                <ReportHeader></ReportHeader>\r\n                <div style={{width:\"40%\",margin:'20px auto'}}>\r\n                    <Chart chartData={chartLogic(this.state.allEvents)}></Chart>\r\n                </div>\r\n                <div>\r\n                    {this.state.events.map( event => createReportComponents(event) )}\r\n                </div>\r\n                <div style={{float:'right',margin:'2%'}}>\r\n                    {pagination}\r\n                </div>\r\n                <div>\r\n                    <Alert alertType={this.state.alertType} msg={this.state.msg} open={this.state.open} alertClose={()=>this.setState({open:false})}></Alert>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Report;"]},"metadata":{},"sourceType":"module"}